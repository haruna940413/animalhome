<div class="top-border"><%= image_tag('border.png', :size =>'1100x5') %></div>
<div class="top-img"><%= image_tag('concept.png', :size =>'1100x150') %></div>

<div class="link_bar">
  <%= link_to "top", root_path %>
  <span>>></span>
  <%= link_to "ペット一覧", enduser_pets_path %>
  <span>>></span>
  <%= link_to "予約カレンダー", enduser_reservations_path %>
</div>

<h2>見学の予約をする</h2>

<%= form_with model: @reservation, url: enduser_reservations_path, local: true do |f| %>

　<!--エラー文-->
  <% if @reservation.errors.any? %>
    <div>
      <h5><%= @reservation.errors.count %>件のerrorが発生しました。</h5>
      <ul>
        <% @reservation.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="reservation-container">
　　<!--予約(開始)-->
    <div class="col-xl-8">
      <div class="form-group">
        <div class="input-group" data-target-input="nearest">
          <%= f.text_field :start_date, id: "start_created_at", class: "form-control datetimepicker6", data: { target: '#start_created_at'}, :placeholder => "希望開始時間" %>
          <div class="input-group-append" data-target="#start_created_at" data-toggle="datetimepicker">
            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
          </div>
        </div>
      </div>
    </div>
    <!--予約(終了)-->
    <!--<div class="col-xl-8">-->
    <!--  <div class="form-group">-->
    <!--    <div class="input-group" data-target-input="nearest">-->
    <!--      <%#= f.text_field :end_date, id: "end_created_at", class: "form-control datetimepicker7", data: { target: '#end_created_at'}, :placeholder => "希望終了時間" %>-->
    <!--      <div class="input-group-append" data-target="#end_created_at" data-toggle="datetimepicker">-->
    <!--        <div class="input-group-text"><i class="fa fa-calendar"></i></div>-->
    <!--      </div>-->
    <!--    </div>-->
    <!--  </div>-->
    <!--</div>-->
    <%= f.submit "この日程で予約する", class: "btn btn-outline-dark" %>
  </div>
<% end %>

<!--カレンダー押したら出てくる-->
<script type="text/javascript">
  $(function () {
    $('.datetimepicker6').datetimepicker({
      format:'Y/M/D HH:00'
    });
    // $('.datetimepicker7').datetimepicker({
    //   format:'Y/M/D HH:00',
    //   useCurrent: false //Important! See issue #1075
    // });
    $(".datetimepicker6").on("dp.change", function (e) {
      $('.datetimepicker7').data("DateTimePicker").minDate(e.date);
    });
    // $(".datetimepicker7").on("dp.change", function (e) {
    //   $('.datetimepicker6').data("DateTimePicker").maxDate(e.date);
    // });
  });
</script>

<div class="top-border"><%= image_tag('border.png', :size =>'1100x5') %></div>

<h2>現在の予約状況</h2>
<% @reservations.each do |reservation| %>
  <% if enduser_enduser_signed_in? %>
    <% if reservation.enduser_id == current_enduser_enduser.id %>
      <div>
         <%= link_to reservation.id, enduser_reservation_path(reservation) %>
         <%= reservation.start_date.strftime("%Y/%m/%d %H:%M") %>
      </div>
    <% else %>
      <div>
         <%= reservation.id %>
         <%= reservation.start_date.strftime("%Y/%m/%d %H:%M") %>
      </div>
    <% end %>
  <% else%>
    <div>
       <%= reservation.id %>
       <%= reservation.start_date.strftime("%Y/%m/%d %H:%M") %>
    </div>
  <% end %>
<% end %>
